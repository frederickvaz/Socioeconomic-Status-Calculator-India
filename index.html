<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SES Calculator — BG Prasad & Kuppuswamy</title>

  <!-- PWA + Icons -->
  <link rel="manifest" href="site.webmanifest">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="96x96" href="icons/favicon-96x96.png">
  <link rel="icon" href="favicon.ico">
  <meta name="theme-color" content="#0066cc">

  <style>
    :root { --brand:#0066cc; }
    body { font-family: Arial, sans-serif; margin:0; background:#f6f8fb; color:#222; }
    header { background:#fff; border-bottom:1px solid #eaeaea; padding:12px 16px; position:sticky; top:0; z-index:5; }
    header .nav { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    a.btn, button.btn { background:var(--brand); color:#fff; padding:10px 14px; border-radius:8px; text-decoration:none; border:0; cursor:pointer; }
    a.btn.alt, button.btn.alt { background:#e9f2ff; color:#023; border:1px solid #cfe3ff; }
    main { max-width:900px; margin:0 auto; padding:20px; }
    .card { background:#fff; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,.06); padding:16px; margin:16px 0; }
    .grid { display:grid; gap:16px; }
    .grid.two { grid-template-columns: repeat(auto-fit,minmax(240px,1fr)); }
    .hide { display:none !important; }
    label { display:block; margin-top:10px; }
    input, select { width:100%; padding:10px; font-size:16px; border:1px solid #ccd; border-radius:8px; }
    table { width:100%; border-collapse:collapse; font-size:14px; }
    th, td { padding:8px; border-bottom:1px solid #eee; text-align:left; }
    .note { color:#555; font-size:14px; }
  </style>
</head>
<body>

<header>
  <div class="nav">
    <strong>SES Calculator</strong>
    <span id="route-crumb" class="note"></span>
    <span style="flex:1"></span>
    <a href="#/home" id="nav-home" class="btn alt hide">Home</a>
    <a href="#/bgp"  id="nav-bgp"  class="btn alt hide">BG Prasad</a>
    <a href="#/ks"   id="nav-ks"   class="btn alt hide">Kuppuswamy</a>
  </div>
</header>

<main>
  <!-- Page 1: Home -->
  <section id="page-home">
    <div class="card">
      <h1>Choose a Scale</h1>
      <div class="grid two">
        <div class="card">
          <h2>BG Prasad</h2>
          <a href="#/bgp" class="btn">Open BG Prasad</a>
        </div>
        <div class="card">
          <h2>Kuppuswamy</h2>
          <a href="#/ks" class="btn">Open Kuppuswamy</a>
        </div>
      </div>
    </div>
    <div class="card">
      <h2>Resources</h2>
      <ul>
        <li><a href="https://labourbureau.gov.in/" target="_blank">CPI-IW Official Site</a></li>
      </ul>
    </div>
  </section>

  <!-- Page 2: BG Prasad -->
  <section id="page-bgp" class="hide">
    <div class="card">
      <h2>BG Prasad — Step 0: Compute Per-Capita Income</h2>
      <label>Total Family Income (₹):</label>
      <input id="totalIncomeBG" type="number" />
      <label>Family Size:</label>
      <input id="familySizeBG" type="number" />
      <div id="pciBGNote" class="note">PCI auto-calculated here</div>
    </div>

    <div class="card">
      <h2>Step 1: CPI</h2>
      <label>CPI-IW (2016=100):</label>
      <input id="cpi" type="number" step="0.01"/>
      <label>Month:</label>
      <select id="month"><option>January</option><option>February</option></select>
      <label>Year:</label>
      <select id="year">
        <option value="2023">2023</option><option value="2024">2024</option><option value="2025">2025</option>
      </select>
      <button class="btn" onclick="calculateThresholds()">Calculate Thresholds</button>
      <div id="result" class="card"></div>
    </div>

    <div class="card">
      <h2>Step 2: Classify</h2>
      <input id="income" type="number" placeholder="Auto-filled PCI"/>
      <button class="btn" onclick="determineClass()">Determine Class</button>
      <div id="classResult" class="card"></div>
    </div>
  </section>

  <!-- Page 3: Kuppuswamy -->
  <section id="page-ks" class="hide">
    <div class="card">
      <h2>Kuppuswamy — Step 1: CPI → Income Bands</h2>
      <input id="ks-cpi" type="number" placeholder="CPI-IW (2016=100)" />
      <button class="btn" id="ks-update-bands">Update</button>
      <table>
        <thead><tr><th>Base Min</th><th>Base Max</th><th>Cur Min</th><th>Cur Max</th><th>Score</th></tr></thead>
        <tbody id="ks-bands-body"></tbody>
      </table>
    </div>

    <div class="card">
      <h2>Step 2: Education & Occupation</h2>
      <select id="ks-education"></select><div id="ks-edu-score"></div>
      <select id="ks-occupation"></select><div id="ks-occ-score"></div>
    </div>

    <div class="card">
      <h2>Step 3: Income & Total</h2>
      <input id="ks-income" type="number" placeholder="Total Family Income"/>
      <div id="ks-inc-score"></div>
      <button class="btn" id="ks-calc-total">Calculate Total Score & Class</button>
      <div id="ks-output" class="card"></div>
    </div>
  </section>
</main>

<script src="app.js"></script>
<script>
  // Simple router
  const pages = { "/home":"page-home", "/bgp":"page-bgp", "/ks":"page-ks" };
  function show(path) {
    Object.values(pages).forEach(id => document.getElementById(id).classList.add("hide"));
    document.getElementById(pages[path]||"page-home").classList.remove("hide");
    ["nav-home","nav-bgp","nav-ks"].forEach(n=>document.getElementById(n)?.classList.toggle("hide",path==="/home"));
  }
  window.addEventListener("hashchange",()=>show(location.hash.replace("#","")));
  show(location.hash.replace("#","")||"/home");
</script>
</body>
</html>
